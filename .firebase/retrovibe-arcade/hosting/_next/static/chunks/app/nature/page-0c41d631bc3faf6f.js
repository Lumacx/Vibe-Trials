(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{16805:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(8567),l=r(92123);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,n.$)(t))}},52986:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r){var l;return l=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,t||"default");if("object"!==n(l))return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===n(l)?l:String(l))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>l})},55472:(e,t,r)=>{"use strict";r.d(t,{Mg:()=>s,OG:()=>l});let n="vibeTrialsLeaderboard",l=e=>{let t=localStorage.getItem(n);return(t?JSON.parse(t):{})[e]||[]},s=(e,t,r)=>{let l=localStorage.getItem(n),s=l?JSON.parse(l):{};s[e]||(s[e]=[]),s[e].push({playerName:t,score:r}),s[e].sort((e,t)=>t.score-e.score),localStorage.setItem(n,JSON.stringify(s))}},68349:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,D:()=>c});var n=r(56391),l=r(16465),s=r(32074),a=r(16805);let o=["score","time","lives","health","className"];var i=s.createElement;function c(e){let{score:t,time:r,lives:c,health:u,className:d}=e,f=(0,l.A)(e,o),{0:m,1:p}=(0,s.useState)(t),{0:h,1:g}=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(t!==m){g(!0),p(t);let e=setTimeout(()=>g(!1),500);return()=>clearTimeout(e)}},[t,m]),i("div",(0,n.A)({className:(0,a.cn)("w-48 space-y-2 rounded-lg border-2 border-accent/50 bg-background/70 p-4 font-code text-accent shadow-lg backdrop-blur-sm flex flex-col",d)},f),i("div",{className:(0,a.cn)("flex justify-between",{"text-red-400 animate-pulse":r<20})},i("span",null,"TIME"),i("span",null,r,"s")),i("div",{className:(0,a.cn)("flex justify-between",{"text-yellow-300 animate-scoreflash":h})},i("span",null,"SCORE"),i("span",null,t)),void 0!==c&&i("div",{className:"flex justify-between"},i("span",null,"LIVES"),i("span",null,c)),void 0!==u&&i("div",{className:"flex justify-between"},i("span",null,"HP"),i("span",null,u)))}let u=c},74826:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var n=r(52986),l=r(32074),s=r(74131),a=r(76025),o=r(49688),i=r.n(o),c=r(89269),u=r(68349),d=r(67305),f=r(16898),m=r(55472),p=l.createElement;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let x=[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],v=x.length,b={LANE:1,MEDIAN:2,FOREST:3,START:4},y={x:Math.floor(8),y:v-1},w=x.map((e,t)=>e[0]===b.LANE?t:-1).filter(e=>-1!==e);function N(){let{0:e,1:t}=(0,l.useState)(0),{0:r,1:n}=(0,l.useState)(90),{0:o,1:h}=(0,l.useState)("playing"),{0:N,1:E}=(0,l.useState)(""),_=(0,l.useRef)(y),k=(0,l.useRef)([]),S=(0,l.useRef)(null),j=(0,l.useRef)(null),R=(0,l.useRef)(null),A=(0,l.useRef)(null),O=(0,l.useRef)(null),M=(0,l.useRef)(0),F=(0,l.useRef)(null),P=(0,l.useRef)(null),D=(0,l.useRef)(null),I=(0,l.useRef)(null),T=(0,l.useRef)(null),H=(0,l.useRef)(null),{0:C,1:z}=(0,l.useState)(2),V=()=>{z(e=>{let t=e-1;return t<=0?(H.current?.play(),h("lose-hit")):(_.current=y,j.current&&j.current.position.set((_.current.x-8+.5)*1,.5,(_.current.y-v/2+.5)*1)),t})};(0,l.useEffect)(()=>{void 0!==s.Howl&&(F.current=new s.Howl({src:["/sfx/Frog_Hop.mp3"],volume:.25}),P.current=new s.Howl({src:["/sfx/Vehicle_Pass_1.mp3","/sfx/Vehicle_Pass_2.mp3","/sfx/Vehicle_Pass_3.mp3"],volume:.1}),D.current=new s.Howl({src:["/sfx/Frog_splat_1.mp3","/sfx/Frog_splat_2.mp3","/sfx/Frog_splat_3.mp3","/sfx/Frog_splat_4.mp3"],volume:.3}),I.current=new s.Howl({src:["/sfx/Lane_Crossed_chime.mp3"],volume:.2}),T.current=new s.Howl({src:["/sfx/Forest_Victory1.mp3","/sfx/Forest_Victory2.mp3","/sfx/Forest_Victory3.mp3"],volume:.3}),H.current=new s.Howl({src:["/sfx/Game_Over_Defeated.mp3"],volume:.08}))},[]);let W=e=>{if(console.log("renderEnvironment called"),console.log("GRID_WIDTH:",16),console.log("GRID_HEIGHT:",v),!R.current)return;R.current.children=R.current.children.filter(e=>!(e.userData&&"environment-tile"===e.userData.type));let t=new f.iNn(1,.05,1);for(let r=v-1;r>=0;r--)for(let n=0;n<16;n++){let l;console.log("Rendering tile at x:",n,"y:",r),console.log("Grid value at [",r,"][",n,"]:",e[r][n]);let s=e[r][n];s===b.LANE?l=new f._4j({color:3355443,roughness:.9}):s===b.MEDIAN?l=new f._4j({color:2263842,roughness:.7}):s===b.FOREST?l=new f._4j({color:25600,roughness:.6}):(l=new f._4j({color:9127187,roughness:.8}),s===b.START&&(l=new f._4j({color:2263842,roughness:.7})));let a=new f.eaF(t,l);a.position.set((n-8+.5)*1,-.025,(r-v/2+.5)*1),a.userData.type="environment-tile",R.current.add(a)}};(0,l.useEffect)(()=>{let e=S.current;if(!e)return;let t=new f.Z58,r=new f.ubm(75,e.clientWidth/e.clientHeight,.1,1e3),n=new f.JeP({antialias:!0});n.setSize(e.clientWidth,e.clientHeight),e.appendChild(n.domElement),R.current=t,A.current=r,O.current=n,W(x);let l=new f.iNn(.8,.8,.8),s=new f.V9B({color:65280}),a=new f.eaF(l,s);a.position.set((_.current.x-8+.5)*1,.5,(_.current.y-v/2+.5)*1),t.add(a),j.current=a;let i=new f.$p8(0xaaaaaa);t.add(i);let c=new f.ZyN(0xffffff,.5);c.position.set(5,10,7.5),t.add(c);{let e=window.innerWidth/window.innerHeight,t=Math.sqrt(256+v**2)/(2*Math.tan(r.fov*Math.PI/180/2))/Math.min(e,1);r.position.set(0,t,0),r.lookAt(0,0,0)}let u=0,d=e=>{requestAnimationFrame(d);let l=(e-u)/1e3;if(u=e,"playing"===o){j.current&&(j.current.position.x=(_.current.x-8+.5)*1,j.current.position.z=(_.current.y-v/2+.5)*1);let t=[];if(k.current.forEach(e=>{if(!e.mesh)return;let r=g(g({},e),{},{gridX:e.gridX+e.speed*l});r.mesh.position.x=(r.gridX-8+.5)*1,r.speed>0&&r.gridX>16||r.speed<0&&r.gridX<-24?(R.current?.remove(r.mesh),r.mesh.geometry?.dispose(),r.mesh.material.dispose()):t.push(r)}),k.current=t,j.current){let e=new f.NRn().setFromObject(j.current);for(let t of k.current){if(!t.mesh)continue;let r=new f.NRn().setFromObject(t.mesh);if(e.intersectsBox(r)&&"playing"===o){D.current?.play(),V();break}}}e-M.current>800&&(G(),M.current=e)}n.render(t,r)};d(0);let m=()=>{if(O.current&&A.current&&S.current){let e=S.current.clientWidth,t=S.current.clientHeight;O.current.setSize(e,t),A.current.aspect=e/t;let r=e/t,n=Math.sqrt(256+v**2)/(2*Math.tan(A.current.fov*Math.PI/180/2))/Math.min(r,1);A.current.position.y=n,A.current.updateProjectionMatrix()}},p=new ResizeObserver(()=>{m()});return S.current&&p.observe(S.current),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),p.disconnect(),t.traverse(e=>{e instanceof f.eaF&&(e.geometry?.dispose(),e.material instanceof f.imn?e.material.dispose():Array.isArray(e.material)&&e.material.forEach(e=>e.dispose()))}),n.dispose(),e&&n.domElement&&e.contains(n.domElement)&&e.removeChild(n.domElement)}},[o]),(0,l.useEffect)(()=>{if("playing"!==o)return;let e=setInterval(()=>{n(t=>{if(t<=1){if("playing"===o&&C>0)return H.current?.play(),h("lose-time"),clearInterval(e),0;else if("playing"===o&&C<=0)return h("lose-time"),clearInterval(e),0}return t-1})},1e3);return()=>clearInterval(e)},[o,C]),(0,l.useEffect)(()=>{if(!S.current)return;let e=e=>{if("playing"!==o)return;let r=g({},_.current);switch(e.key){case"ArrowUp":r.y=Math.max(0,_.current.y-1);break;case"ArrowDown":r.y=Math.min(v-1,_.current.y+1);break;case"ArrowLeft":r.x=Math.max(0,_.current.x-1);break;case"ArrowRight":r.x=Math.min(15,_.current.x+1);break;default:return}if(r.x>=0&&r.x<16&&r.y>=0&&r.y<v){let e=x[r.y][r.x];(e===b.MEDIAN||e===b.FOREST)&&(I.current?.play(),e===b.MEDIAN?t(e=>e+50):e===b.FOREST&&t(e=>e+500)),_.current=r,F.current?.play()}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o]),(0,l.useEffect)(()=>{"playing"===o&&0===_.current.y&&(T.current?.play(),h("win"))},[_.current.y,o]);let G=()=>{let e,t;if(console.log("spawnVehicle called"),"playing"!==o||!R.current)return;let r=Math.floor(Math.random()*w.length),n=w[r],l=r%2==0?1:-1,s=1===l?-2:17,a=(1===l?1:-1)*(3*Math.random()+2);console.log("Vehicle speed:",a);let i=Math.random()>.5?"car":"motorcycle";"car"===i?(e=new f.iNn(1.8,.8,.8),t=new f._4j({color:0xff0000})):(e=new f.iNn(1.2,.8,.8),t=new f._4j({color:255}));let c=new f.eaF(e,t);c.position.set((s-8+.5)*1,.5,(n-v/2+.5)*1),R.current.add(c);let u={id:Date.now()+Math.random(),gridX:s,gridY:n,speed:a,type:i,mesh:c};k.current.push(u),console.log("Vehicle spawned:",u),console.log("Number of vehicles in vehiclesRef:",k.current.length)};return(0,l.useEffect)(()=>{("lose-time"===o||"lose-hit"===o||"win"===o)&&console.log("Game Over/Win State:",o)},[o]),p(l.Fragment,null,p("div",{className:"w-full px-[10%] p-2 mb-0 flex flex-wrap gap-6 justify-between"},p("div",{className:"flex flex-wrap items-center justify-between gap-5 flex-1 min-w-[250px]"},p("div",{className:"flex-shrink-0"},p(i(),{href:"/",passHref:!0},p(c.$,{variant:"outline",className:"h-10"},p(d.A,{className:"mr-2 h-4 w-4"}),"Back to Hub"))),p("div",{className:"flex-shrink max-w-[180px] w-full"},p(a.A,{src:"/music/6_Pixel_Groove_Adventure.mp3",volume:.25}))),p("div",{className:"flex flex-wrap items-center justify-between gap-5 flex-1 min-w-[250px]"},p("div",{className:"text-green-400 font-headline font-bold text-xl sm:text-2xl"},"Forest Crossing"),p("div",{className:"flex-shrink-0",style:{transform:"scale(0.8)",transformOrigin:"right center"}},p(u.D,{score:e,time:r,lives:C})))),p("div",{className:"flex flex-col items-center justify-center w-full h-full p-4 space-y-4"},p("div",{ref:S,className:"relative mx-auto rounded-lg border-4 border-accent/50 bg-black/30 backdrop-blur-sm",style:{height:"calc(70vh - 2rem)",aspectRatio:`16 / ${v}`,maxWidth:"100%",maxHeight:"100%"}})),p("div",{className:"w-full flex justify-center items-stretch gap-4 flex-wrap px-[10%] p-2"},p("div",{className:"bg-black/70 p-4 rounded-lg max-w-xs min-w-[120px] flex-1 text-sm md:text-base"},p("h3",{className:"font-headline text-xl font-bold mb-2"},"Goal"),p("p",null,"Reach the forest on the other side."),p("p",null,"Avoid being hit by vehicles.")),p("div",{className:"flex items-center justify-center flex-1 min-w-[120px]"},p("img",{src:"https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXZrZWYydThnb2l6cWdnNDY2azk5c3RpNnRndnlrNWh6MzFhczMweCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xckpvtJhGi3TpQKRrW/giphy.gif",alt:"Nature Animation",className:"w-32 sm:w-40 h-auto rounded-lg shadow-lg"})),p("div",{className:"bg-black/70 p-4 rounded-lg max-w-xs min-w-[120px] flex-1 text-sm md:text-base"},p("h3",{className:"font-headline text-xl font-bold mb-2"},"Movement"),p("p",null,"Arrow Keys: Move 1 space."))),"playing"!==o&&p("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 z-50"},p("div",{className:"text-center space-y-4 p-4 rounded-lg bg-black/80"},"win"===o&&p("h2",{className:"font-headline text-4xl font-bold text-green-400"},"You Crossed!"),"lose-time"===o&&p("h2",{className:"font-headline text-4xl font-bold text-red-400"},"Time's Up!"),"lose-hit"===o&&p("h2",{className:"font-headline text-4xl font-bold text-red-400"},"Squished!"),("win"===o||"lose-time"===o||"lose-hit"===o)&&p(l.Fragment,null,p("p",{className:"text-white mb-4"},"Final Score: ",e),p("div",{className:"flex flex-col items-center gap-2"},p("input",{type:"text",placeholder:"Enter your name",className:"px-2 py-1 rounded text-black",value:N,onChange:e=>E(e.target.value)}),p(c.$,{onClick:()=>{""!==N.trim()&&((0,m.Mg)("Forest Crossing",N,e),window.location.href="/")},disabled:""===N.trim()},"Save Score"))),p("div",{className:"flex gap-4 justify-center"},p(c.$,{onClick:()=>window.location.reload()},"Play Again")))))}},76025:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(32074),l=r(47149),s=n.createElement;let a=e=>{let{src:t,volume:r=.15,loop:a=!0}=e,o=(0,l.usePathname)(),{0:i,1:c}=(0,n.useState)(r),{0:u,1:d}=(0,n.useState)(!1),f=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=f.current;return e&&(e.volume=u?0:i,e.loop=a,e.play().catch(e=>{console.warn("\uD83D\uDD07 Autoplay blocked or failed:",e.message)})),()=>{e&&(e.pause(),e.currentTime=0)}},[t,a,i,u]),s("div",{className:`z-50 flex items-center space-x-2 bg-black/50 rounded-md border border-purple-500 
        ${"/"===o||"/leaderboard"===o||"/credits"===o?"fixed bottom-4 right-4":"relative left-1/2 transform -translate-x-1/2"}
        h-10 px-2`},s("button",{onClick:()=>{d(!u),f.current&&(f.current.muted=!u)},className:"h-8 w-8 flex items-center justify-center rounded-md bg-purple-600 text-white text-sm hover:bg-purple-700 transition"},u?"\uD83D\uDD07":"\uD83D\uDD0A"),s("input",{type:"range",min:"0",max:"1",step:"0.01",value:u?0:i,onChange:e=>{let t=parseFloat(e.target.value);c(t),f.current&&(f.current.volume=t),d(0===t)},className:"h-2 w-24 appearance-none rounded bg-gray-300 dark:bg-gray-700 cursor-pointer"}),s("audio",{ref:f,src:t,preload:"auto",onError:e=>console.error("âŒ Audio error:",e)}))}},89269:(e,t,r)=>{"use strict";r.d(t,{$:()=>f});var n=r(56391),l=r(16465),s=r(32074),a=r(2719),o=r(82271),i=r(16805);let c=["className","variant","size","asChild"];var u=s.createElement;let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:f=!1}=e,m=(0,l.A)(e,c);return u(f?a.DX:"button",(0,n.A)({className:(0,i.cn)(d({variant:s,size:o,className:r})),ref:t},m))});f.displayName="Button"},89324:(e,t,r)=>{Promise.resolve().then(r.bind(r,74826))}},e=>{var t=t=>e(e.s=t);e.O(0,[377,457,688,175,189,96,358],()=>t(89324)),_N_E=e.O()}]);
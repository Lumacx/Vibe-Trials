(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{16805:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(8567),l=r(92123);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,n.$)(t))}},52986:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r){var l;return l=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,t||"default");if("object"!==n(l))return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===n(l)?l:String(l))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>l})},55472:(e,t,r)=>{"use strict";r.d(t,{Mg:()=>a,OG:()=>l});let n="vibeTrialsLeaderboard",l=e=>{let t=localStorage.getItem(n);return(t?JSON.parse(t):{})[e]||[]},a=(e,t,r)=>{let l=localStorage.getItem(n),a=l?JSON.parse(l):{};a[e]||(a[e]=[]),a[e].push({playerName:t,score:r}),a[e].sort((e,t)=>t.score-e.score),localStorage.setItem(n,JSON.stringify(a))}},68349:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,D:()=>u});var n=r(56391),l=r(16465),a=r(32074),s=r(16805);let i=["score","time","lives","health","className"];var o=a.createElement;function u(e){let{score:t,time:r,lives:u,health:c,className:d}=e,f=(0,l.A)(e,i),{0:m,1:p}=(0,a.useState)(t),{0:y,1:b}=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(t!==m){b(!0),p(t);let e=setTimeout(()=>b(!1),500);return()=>clearTimeout(e)}},[t,m]),o("div",(0,n.A)({className:(0,s.cn)("w-48 space-y-2 rounded-lg border-2 border-accent/50 bg-background/70 p-4 font-code text-accent shadow-lg backdrop-blur-sm flex flex-col",d)},f),o("div",{className:(0,s.cn)("flex justify-between",{"text-red-400 animate-pulse":r<20})},o("span",null,"TIME"),o("span",null,r,"s")),o("div",{className:(0,s.cn)("flex justify-between",{"text-yellow-300 animate-scoreflash":y})},o("span",null,"SCORE"),o("span",null,t)),void 0!==u&&o("div",{className:"flex justify-between"},o("span",null,"LIVES"),o("span",null,u)),void 0!==c&&o("div",{className:"flex justify-between"},o("span",null,"HP"),o("span",null,c)))}let c=u},76025:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(32074),l=r(47149),a=n.createElement;let s=e=>{let{src:t,volume:r=.15,loop:s=!0}=e,i=(0,l.usePathname)(),{0:o,1:u}=(0,n.useState)(r),{0:c,1:d}=(0,n.useState)(!1),f=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=f.current;return e&&(e.volume=c?0:o,e.loop=s,e.play().catch(e=>{console.warn("\uD83D\uDD07 Autoplay blocked or failed:",e.message)})),()=>{e&&(e.pause(),e.currentTime=0)}},[t,s,o,c]),a("div",{className:`z-50 flex items-center space-x-2 bg-black/50 rounded-md border border-purple-500 
        ${"/"===i||"/leaderboard"===i||"/credits"===i?"fixed bottom-4 right-4":"relative left-1/2 transform -translate-x-1/2"}
        h-10 px-2`},a("button",{onClick:()=>{d(!c),f.current&&(f.current.muted=!c)},className:"h-8 w-8 flex items-center justify-center rounded-md bg-purple-600 text-white text-sm hover:bg-purple-700 transition"},c?"\uD83D\uDD07":"\uD83D\uDD0A"),a("input",{type:"range",min:"0",max:"1",step:"0.01",value:c?0:o,onChange:e=>{let t=parseFloat(e.target.value);u(t),f.current&&(f.current.volume=t),d(0===t)},className:"h-2 w-24 appearance-none rounded bg-gray-300 dark:bg-gray-700 cursor-pointer"}),a("audio",{ref:f,src:t,preload:"auto",onError:e=>console.error("âŒ Audio error:",e)}))}},79155:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var n=r(56391),l=r(16465),a=r(32074),s=r(16805);let i=["className","type"];var o=a.createElement;let u=a.forwardRef((e,t)=>{let{className:r,type:a}=e,u=(0,l.A)(e,i);return o("input",(0,n.A)({type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},u))});u.displayName="Input"},82522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(52986),l=r(32074),a=r(74131),s=r(49688),i=r.n(s),o=r(47149),u=r(79155),c=r(55472),d=r(89269),f=r(76025),m=r(68349),p=r(67305),y=r(16898),b=l.createElement;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let g=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,0,1,0,1,0,1,0,1,1,2,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,1],[1,0,1,0,1,0,1,2,1,0,1,0,1,1,2,1],[1,0,1,0,0,0,2,0,0,0,1,0,0,1,0,0],[1,0,1,1,1,1,1,1,1,1,1,1,0,1,0,1],[1,0,0,0,0,0,2,0,1,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1]],h=g[0].length,w=g.length,N={x:1,y:9},E={x:15,y:5};function k(){let{0:e,1:t}=(0,l.useState)(45),{0:r,1:n}=(0,l.useState)(3),{0:s,1:x}=(0,l.useState)("playing"),{0:k,1:j}=(0,l.useState)(N),{0:A,1:S}=(0,l.useState)(!1),{0:O,1:P}=(0,l.useState)(""),M=(0,l.useRef)(null),R=(0,o.useRouter)(),_=()=>e*r,L=async()=>{if(O.trim()){let e=_();await (0,c.Mg)("Stone Labyrinth",O,e),R.push("/")}},H=(0,l.useRef)(null),F=(0,l.useRef)(null);(0,l.useRef)([]);let D=(0,l.useRef)(null),z=(0,l.useRef)(null),T=(0,l.useRef)(null),I=(0,l.useRef)({x:0,y:0}),C=(0,l.useRef)(!1),Y=(0,l.useRef)(null),W=(0,l.useRef)(null),$=(0,l.useRef)(null),X=(0,l.useRef)(null);(0,l.useEffect)(()=>{void 0!==a.Howl&&(Y.current=new a.Howl({src:["/sfx/Player_Step.mp3"],volume:.25}),W.current=new a.Howl({src:["/sfx/Falling_into_Hole.mp3"],volume:.25}),$.current=new a.Howl({src:["/sfx/Exit_ding.mp3"],volume:.25}),X.current=new a.Howl({src:["/sfx/Game_Over_Ominous.mp3"],volume:.25}))},[]);let Z=()=>{let e=[],t=!1,r=0;for(;!t&&r<1e3;){e=Array.from({length:w},()=>Array.from({length:h},()=>Math.random()>.7?1:2*(Math.random()>.9)));for(let t=0;t<w;t++)e[t][0]=1,e[t][h-1]=1;for(let t=0;t<h;t++)e[0][t]=1,e[w-1][t]=1;e[N.y][N.x]=0,e[E.y][E.x]=0;let n=[v({},N)],l=Array.from({length:w},()=>Array(h).fill(!1));l[N.y][N.x]=!0;let a=[{dx:0,dy:-1},{dx:0,dy:1},{dx:-1,dy:0},{dx:1,dy:0}];for(;n.length>0;){let r=n.shift();if(r.x===E.x&&r.y===E.y){t=!0;break}for(let t of a){let a=r.x+t.dx,s=r.y+t.dy;a>=0&&a<h&&s>=0&&s<w&&!l[s][a]&&1!==e[s][a]&&2!==e[s][a]&&(l[s][a]=!0,n.push({x:a,y:s}))}}r++}return t?e:(console.warn("Could not generate a labyrinth with a path after multiple attempts. Using a default or simple grid."),[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]])},B=e=>{if(D.current){D.current.children=D.current.children.filter(e=>!(e.userData&&"labyrinth-tile"===e.userData.type));for(let t=0;t<w;t++)for(let r=0;r<h;r++){let n=e[t][r],l=(r-h/2+.5)*1,a=(t-w/2+.5)*1,s=new y.iNn(1,.1,1),i=new y._4j({color:6046776,roughness:.9,metalness:.05}),o=new y.eaF(s,i);if(o.position.set(l,0,a),o.userData.type="labyrinth-tile",D.current.add(o),1===n){let e=new y.iNn(1,1,1),t=new y._4j({color:3878703,roughness:.8,metalness:.1}),r=new y.eaF(e,t);r.position.set(l,.5,a),r.userData.type="labyrinth-tile",D.current.add(r)}else if(2===n){let e=new y.Ho_(.5,.5,.05,32),t=new y._4j({color:4865848,roughness:1,metalness:0}),r=new y.eaF(e,t);r.rotation.x=-Math.PI/2,r.position.set(l,.05,a),r.userData.type="labyrinth-tile",D.current.add(r)}if(r===E.x&&t===E.y){let e=new y.iNn(.8,.2,.8),t=new y.V9B({color:65280}),r=new y.eaF(e,t);r.position.set(l,.1,a),r.userData.type="labyrinth-tile",D.current.add(r)}}}};return(0,l.useEffect)(()=>{let e=new y.Z58,t=new y.ubm(75,window.innerWidth/window.innerHeight,.1,1e3),r=new y.JeP({canvas:H.current,antialias:!0});r.setSize(M.current.clientWidth,M.current.clientHeight),D.current=e,z.current=t,T.current=r;let n=new y.iNn(.8,.8,.8),l=new y.V9B({color:65535}),a=new y.eaF(n,l);a.position.set((N.x-h/2+.5)*1,.5,(N.y-w/2+.5)*1),B(g),D.current?.add(a),F.current=a;let i=new y.$p8(0xaaaaaa);D.current?.add(i);let o=new y.ZyN(0xffffff,.5);o.position.set(5,10,7.5),D.current?.add(o);let u=()=>{if("playing"===s||"lose-hole"===s){if(requestAnimationFrame(u),F.current&&z.current&&T.current&&D.current){let e=F.current.position;z.current.position.set(e.x+3,e.y+5,e.z+3),z.current.lookAt(e)}T.current?.render(D.current,z.current)}};u();let c=()=>{let e=M.current,t=z.current,r=T.current;if(!e||!t||!r)return;let n=e.clientWidth,l=e.clientHeight;r.setSize(n,l),t.aspect=n/l,t.updateProjectionMatrix()},d=e=>{0===e.button&&(C.current=!0,I.current.x=e.clientX,I.current.y=e.clientY,document.body.style.cursor="grabbing")},f=e=>{if(!C.current||!M.current||!z.current)return;let t=e.clientX-I.current.x;e.clientY,I.current.y,I.current.x=e.clientX,I.current.y=e.clientY;let r=F.current.position;z.current.position.sub(r),z.current.position.applyAxisAngle(new y.Pq0(0,1,0),.005*t),z.current.position.add(r),z.current.lookAt(r)},m=e=>{0===e.button&&(C.current=!1,document.body.style.cursor="grab")},p=e=>{if(!z.current)return;let t=z.current.fov+.1*e.deltaY;z.current.fov=Math.max(10,Math.min(100,t)),z.current.updateProjectionMatrix()};return M.current?.addEventListener("mousedown",d),M.current?.addEventListener("mousemove",f),M.current?.addEventListener("mouseup",m),M.current?.addEventListener("wheel",p),window.addEventListener("resize",c),window.addEventListener("orientationchange",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c),D.current?.traverse(e=>{e instanceof y.eaF&&(e.geometry.dispose(),e.material instanceof y.imn?e.material.dispose():Array.isArray(e.material)&&e.material.forEach(e=>e.dispose()))}),M.current?.removeEventListener("mousedown",d),M.current?.removeEventListener("mousemove",f),M.current?.removeEventListener("mouseup",m),M.current?.removeEventListener("wheel",p),T.current?.dispose()}},[]),(0,l.useEffect)(()=>{let e=()=>{let e=M.current,t=T.current,r=z.current;if(!e||!t||!r)return;let n=e.clientWidth,l=e.clientHeight;t.setSize(n,l),r.aspect=n/l,r.updateProjectionMatrix()},t=new ResizeObserver(()=>{e()});return M.current&&(t.observe(M.current),e()),()=>{M.current&&t.unobserve(M.current),t.disconnect()}},[]),(0,l.useEffect)(()=>{if(!M.current)return;let e=e=>{if("playing"!==s)return;let t=v({},k);switch(e.key){case"ArrowUp":t.y=Math.max(0,k.y-1);break;case"ArrowDown":t.y=Math.min(w-1,k.y+1);break;case"ArrowLeft":t.x=Math.max(0,k.x-1);break;case"ArrowRight":t.x=Math.min(h-1,k.x+1);break;default:return}1!==g[t.y][t.x]&&(S(!1),Y.current?.play(),j(t),F.current&&F.current.position.set((t.x-h/2+.5)*1,.5,(t.y-w/2+.5)*1)),t.x===E.x&&t.y===E.y&&"playing"===s&&(x("win"),$.current?.play())};return 2===g[k.y][k.x]&&"playing"===s&&(W.current?.play(),x("lose-hole"),S(!0),F.current&&(F.current.position.y=-1)),window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[k,s]),(0,l.useEffect)(()=>{if("playing"!==s)return;let e=setInterval(()=>{t(t=>t<=1&&"playing"===s?(X.current?.play(),x("lose-time"),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)},[s]),(0,l.useEffect)(()=>{if("lose-hole"===s&&r>0){let e=setTimeout(()=>{n(r-1),j(N),F.current&&F.current.position.set((N.x-h/2+.5)*1,.5,(N.y-w/2+.5)*1),x("playing")},1500);return()=>clearTimeout(e)}"lose-hole"===s&&0===r&&(X.current?.play(),x("lose"),B(g=Z()))},[s,r]),b(l.Fragment,null,b("div",{className:"w-full px-[10%] p-2 mb-2 flex flex-wrap gap-6 justify-between"},b("div",{className:"flex flex-wrap items-center justify-between gap-5 flex-1 min-w-[250px]"},b("div",{className:"flex-shrink-0"},b(i(),{href:"/",passHref:!0},b(d.$,{variant:"outline",className:"h-10"},b(p.A,{className:"mr-2 h-4 w-4"}),"Back to Hub"))),b("div",{className:"flex-shrink max-w-[180px] w-full"},b(f.A,{src:"/music/3_Ancient_Echoes.mp3"}))),b("div",{className:"flex flex-wrap items-center justify-between gap-5 flex-1 min-w-[250px]"},b("div",{className:"text-primary font-headline font-bold text-xl sm:text-2xl"},"Stone Labyrinth"),b("div",{className:"flex-shrink-0",style:{transform:"scale(0.8)",transformOrigin:"right center"}},b(m.A,{score:e*r,time:e,lives:r})))),b("div",{className:"flex flex-col items-center justify-center w-full h-full p-4 space-y-4"},b("div",{ref:M,className:"relative w-full max-w-5xl rounded-lg border-4 border-accent/50 bg-black/30 backdrop-blur-sm",style:{height:"calc(60vh - 2rem)"}},b("canvas",{ref:H,className:"w-full h-full block"}))),b("div",{className:"w-full flex justify-center items-stretch gap-4 flex-wrap px-[10%] p-2"},b("div",{className:"bg-black/70 p-4 rounded-lg max-w-xs min-w-[120px] flex-1"},b("h3",{className:"font-headline text-xl font-bold mb-2"},"Goal"),b("p",null,"Reach the green exit."),b("p",null,"Avoid holes (lose a life).")),b("div",{className:"flex items-center justify-center flex-1 min-w-[120px]"},b("img",{src:"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExNGt6eWhvN2huaHppOXN2MnluYjBqbHphMnFyZjA0aXh6MXRuYTMxdyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/xT0xePQA4e8tTvFWta/giphy.gif",alt:"Stone Animation",className:"w-32 sm:w-40 h-auto rounded-lg shadow-lg"})),b("div",{className:"bg-black/70 p-4 rounded-lg max-w-xs min-w-[120px] flex-1"},b("h3",{className:"font-headline text-xl font-bold mb-2"},"Movement"),b("p",null,"Arrow Keys: Move 1 space"),b("p",null,"Zoom in/out: Mouse wheel"))),"jsx",("win"===s||"lose-time"===s||"lose"===s)&&b("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 z-50"},b("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg text-center space-y-4"},"win"===s&&b("h2",{className:"font-headline text-4xl font-bold text-green-400"},"You Escaped!"),"lose-time"===s&&b("h2",{className:"font-headline text-4xl font-bold text-red-400"},"Time's Up!"),"lose"===s&&b("h2",{className:"font-headline text-4xl font-bold text-red-400"},"Game Over! Out of Lives."),b("p",{className:"text-white"},"Final Score: ",_()),b("div",{className:"mb-4"},b(u.p,{placeholder:"Enter your name",value:O,onChange:e=>P(e.target.value)})),b("div",{className:"flex gap-4 justify-center"},b(d.$,{onClick:L,disabled:""===O.trim()},"Save Score"),b(d.$,{onClick:()=>window.location.reload()},"Play Again"),b(i(),{href:"/",passHref:!0},b(d.$,{variant:"secondary"},"Back to Hub"))))))}},89269:(e,t,r)=>{"use strict";r.d(t,{$:()=>f});var n=r(56391),l=r(16465),a=r(32074),s=r(2719),i=r(82271),o=r(16805);let u=["className","variant","size","asChild"];var c=a.createElement;let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:f=!1}=e,m=(0,l.A)(e,u);return c(f?s.DX:"button",(0,n.A)({className:(0,o.cn)(d({variant:a,size:i,className:r})),ref:t},m))});f.displayName="Button"},91996:(e,t,r)=>{Promise.resolve().then(r.bind(r,82522))}},e=>{var t=t=>e(e.s=t);e.O(0,[377,457,688,175,189,96,358],()=>t(91996)),_N_E=e.O()}]);